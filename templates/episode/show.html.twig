{% extends 'base.html.twig' %}

{% block title %}Episode{% endblock %}

{% block body %}
    <h1>Episode</h1>

    <table class="table">
        <tbody>
        <tr>
            <th>Id</th>
            <td>{{ episode.id }}</td>
        </tr>
        <tr>
            <th>Title</th>
            <td>{{ episode.title }}</td>
        </tr>
        <tr>
            <th>Number</th>
            <td>{{ episode.number }}</td>
        </tr>
        <tr>
            <th>Synopsis</th>
            <td>{{ episode.synopsis }}</td>
        </tr>
        </tbody>
    </table>

    <h1>Commentaires</h1>

    {% for comment in comments %}
        <table class="table">
        <tr>
            <th>Auteur</th>
            <td>{{ comment.author.email }}</td>
        </tr>
        <tr>
            <th>Commentaire</th>
            <td>{{ comment.comment }}</td>
        </tr>
        <tr>
            <th>Note</th>
            <td>{{ comment.rate }}</td>
        </tr>
        <tr>
            <th>Date</th>
            <td>{{ comment.createdAt ? comment.createdAt|date('Y-m-d H:i:s') : '' }}</td>
            <td>
                <a href="{{ path('comment_show', {'id': comment.id}) }}">show</a>
                {% if app.user is same as (comment.author) %}
                    <a href="{{ path('comment_edit', {'id': comment.id}) }}">edit</a>
                {% endif %}
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="5">no records found</td>
        </tr>
    {% endfor %}
    </table>

    {% if app.user %}
        <div>
            <a href="{{ path('comment_new') }}">
                Laisser un commentaire
            </a>
        </div>
    {% endif %}

    <a href="{{ path('episode_index') }}">back to list</a>

    {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('episode_edit', {'Slug': episode.Slug}) }}">Modifier</a>
        {{ include('episode/_delete_form.html.twig') }}
    {% endif %}

{% endblock %}
